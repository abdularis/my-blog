<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.51799c192fa25789803b.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:Montserrat,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 3.13.1"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">Android Custom View Tutorial: Scroll Parallax Image View | Aris&#x27;s Blog</title><meta data-react-helmet="true" name="description" content="Welcome back, now I want to explain about how to create a parallax effect for ImageView when it’s being scrolled. Before we go any further let’s see how it’s…"/><meta data-react-helmet="true" property="og:title" content="Android Custom View Tutorial: Scroll Parallax Image View"/><meta data-react-helmet="true" property="og:description" content="Welcome back, now I want to explain about how to create a parallax effect for ImageView when it’s being scrolled. Before we go any further let’s see how it’s…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:title" content="Android Custom View Tutorial: Scroll Parallax Image View"/><meta data-react-helmet="true" name="twitter:description" content="Welcome back, now I want to explain about how to create a parallax effect for ImageView when it’s being scrolled. Before we go any further let’s see how it’s…"/><link as="script" rel="preload" href="/webpack-runtime-703914a881fe283588fc.js"/><link as="script" rel="preload" href="/framework-30c79b2d3b5411886184.js"/><link as="script" rel="preload" href="/app-fb1d871f987470a48e9e.js"/><link as="script" rel="preload" href="/commons-ab2410dfbec4227df496.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-189cdafe32c9da859313.js"/><link as="fetch" rel="preload" href="/page-data/2018-06-06-scroll_parallax_image_view/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3257411868.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Aris&#x27;s Blog</a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Android Custom View Tutorial: Scroll Parallax Image View</h1><p>June 06, 2018</p></header><section itemProp="articleBody"><p>Welcome back, now I want to explain about how to create a parallax effect for ImageView when it’s being scrolled. Before we go any further let’s see how it’s gonna be.</p>
<!--more-->
<p><img src="/2f3b6c0993d26563527b9e2c22a5d065/screenshot_1.gif" alt="preview">{:.rounded .center}</p>
<h2>Concept</h2>
<p>The idea behind this is that we want to transform content of the ImageView when this ImageView is being scrolled. technically Canvas of the ImageView is transformed using some kind of transformation logic (in this case parallax) before rendered</p>
<p>So we end up with quite simple implementation of this new child of ImageView</p>
<p>We would extend ImageView and implement ViewTreeObserver.OnScrollChangedListener interface because we want to be informed when this view moved/scrolled on the screen.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> ScrollTransformImageView <span class="token operator">:</span> ImageView<span class="token punctuation">,</span> ViewTreeObserver<span class="token punctuation">.</span><span class="token function">OnScrollChangedListener</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> viewLocation <span class="token operator">:</span> IntArray <span class="token operator">=</span> <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> viewTransformer <span class="token operator">:</span> ViewTransformer<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            field<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">onDetached</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
            field <span class="token operator">=</span> value
            field<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">onAttached</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">var</span> enableTransformer <span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>ctx<span class="token operator">:</span> Context<span class="token punctuation">,</span> attributeSet<span class="token operator">:</span> AttributeSet<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> attributeSet<span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttachedToWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAttachedToWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        viewTreeObserver<span class="token punctuation">.</span><span class="token function">addOnScrollChangedListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDetachedFromWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDetachedFromWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        viewTreeObserver<span class="token punctuation">.</span><span class="token function">removeOnScrollChangedListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token operator">:</span> Canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>enableTransformer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">getLocationInWindow</span><span class="token punctuation">(</span>viewLocation<span class="token punctuation">)</span>
            viewTransformer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> viewLocation<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> viewLocation<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onScrollChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>enableTransformer<span class="token punctuation">)</span> <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We have a state called enableTransformer which tell if we need to transform (in this case do parallax) the canvas view or not. Also we have viewTransformer of type ViewTransformer which would do a transformation.
Here onScrollChanged() method would be called when the view scrolled and if enableTransformer is true invalidate() it, in other words do transformation and redraw the image.</p>
<h2>Transformer</h2>
<p>Extend this class to implement any transformation we want.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> ViewTransformer <span class="token punctuation">{</span>

    <span class="token comment">/**
     * This will be called when it's being set into the ScrollTransformImageView
     */</span>
    <span class="token keyword">open</span> <span class="token keyword">fun</span> <span class="token function">onAttached</span><span class="token punctuation">(</span>view <span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">/**
     * This will be called when it's being removed or replaced by other viewTransformer
     * from the ScrollTransformImageView
     */</span>
    <span class="token keyword">open</span> <span class="token keyword">fun</span> <span class="token function">onDetached</span><span class="token punctuation">(</span>view <span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">/**
     * apply will be called every time the view scrolled and before rendered
     */</span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">apply</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">,</span> canvas<span class="token operator">:</span> Canvas<span class="token punctuation">,</span> viewX <span class="token operator">:</span> Int<span class="token punctuation">,</span> viewY <span class="token operator">:</span> Int<span class="token punctuation">)</span>

    <span class="token comment">/**
     * Convert top,left (0,0) coordinate
     * to the middle of the screen
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">fun</span> <span class="token function">centeredX</span><span class="token punctuation">(</span>x <span class="token operator">:</span> Int<span class="token punctuation">,</span> viewWidth <span class="token operator">:</span> Int<span class="token punctuation">,</span> screenWidth <span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token punctuation">(</span>viewWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>screenWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">protected</span> <span class="token keyword">fun</span> <span class="token function">centeredY</span><span class="token punctuation">(</span>y <span class="token operator">:</span> Int<span class="token punctuation">,</span> viewHeight <span class="token operator">:</span> Int<span class="token punctuation">,</span> screenHeight <span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>screenHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>y <span class="token operator">+</span> <span class="token punctuation">(</span>viewHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Writing Vertical Parallax Effect</h2>
<p>In this class we implement the logic to do vertical parallax transformation like in the demo animation above.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> VerticalParallaxTransformer <span class="token operator">:</span> <span class="token function">ViewTransformer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttached</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        view<span class="token punctuation">.</span>scaleType <span class="token operator">=</span> ImageView<span class="token punctuation">.</span>ScaleType<span class="token punctuation">.</span>CENTER_CROP
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">apply</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">,</span> canvas<span class="token operator">:</span> Canvas<span class="token punctuation">,</span> viewX <span class="token operator">:</span> Int<span class="token punctuation">,</span> viewY <span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span>scaleType <span class="token operator">==</span> ImageView<span class="token punctuation">.</span>ScaleType<span class="token punctuation">.</span>CENTER_CROP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">val</span> imageWidth <span class="token operator">=</span> view<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>intrinsicWidth
            <span class="token keyword">val</span> imageHeight <span class="token operator">=</span> view<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>intrinsicHeight

            <span class="token keyword">val</span> viewWidth <span class="token operator">=</span> view<span class="token punctuation">.</span>width <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingLeft <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingRight
            <span class="token keyword">val</span> viewHeight <span class="token operator">=</span> view<span class="token punctuation">.</span>height <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingTop <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingBottom

            <span class="token keyword">val</span> deviceHeight <span class="token operator">=</span> view<span class="token punctuation">.</span>resources<span class="token punctuation">.</span>displayMetrics<span class="token punctuation">.</span>heightPixels

            <span class="token comment">// If this view is off screen we wont do anything</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>viewY <span class="token operator">&lt;</span> <span class="token operator">-</span>viewHeight <span class="token operator">||</span> viewY <span class="token operator">></span> deviceHeight<span class="token punctuation">)</span> <span class="token keyword">return</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>imageWidth <span class="token operator">*</span> viewHeight <span class="token operator">&lt;</span> viewWidth <span class="token operator">*</span> imageHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">val</span> scale <span class="token operator">=</span> viewWidth<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> imageWidth<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> invisibleVerticalArea <span class="token operator">=</span> imageHeight <span class="token operator">*</span> scale <span class="token operator">-</span> viewHeight

                <span class="token keyword">val</span> y <span class="token operator">=</span> <span class="token function">centeredY</span><span class="token punctuation">(</span>viewY<span class="token punctuation">,</span> viewHeight<span class="token punctuation">,</span> deviceHeight<span class="token punctuation">)</span>
                <span class="token keyword">val</span> translationScale <span class="token operator">=</span> invisibleVerticalArea <span class="token operator">/</span> <span class="token punctuation">(</span>deviceHeight <span class="token operator">+</span> viewHeight<span class="token punctuation">)</span>
                canvas<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> y <span class="token operator">*</span> translationScale<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Make this ImageView always maintain aspect ratio by</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttached</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    view<span class="token punctuation">.</span>scaleType <span class="token operator">=</span> ImageView<span class="token punctuation">.</span>ScaleType<span class="token punctuation">.</span>CENTER_CROP
<span class="token punctuation">}</span></code></pre></div>
<p>What going on in this code?</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">if</span> <span class="token punctuation">(</span>imageWidth <span class="token operator">*</span> viewHeight <span class="token operator">&lt;</span> viewWidth <span class="token operator">*</span> imageHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// scale factor based on the width</span>
	<span class="token keyword">val</span> scale <span class="token operator">=</span> viewWidth<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> imageWidth<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// explained below</span>
	<span class="token keyword">val</span> invisibleVerticalArea <span class="token operator">=</span> imageHeight <span class="token operator">*</span> scale <span class="token operator">-</span> viewHeight

	<span class="token comment">// y is how much the distance between viewY and the center of the screen (deviceHeight)</span>
	<span class="token keyword">val</span> y <span class="token operator">=</span> <span class="token function">centeredY</span><span class="token punctuation">(</span>viewY<span class="token punctuation">,</span> viewHeight<span class="token punctuation">,</span> deviceHeight<span class="token punctuation">)</span>
	<span class="token keyword">val</span> translationScale <span class="token operator">=</span> invisibleVerticalArea <span class="token operator">/</span> <span class="token punctuation">(</span>deviceHeight <span class="token operator">+</span> viewHeight<span class="token punctuation">)</span>
	canvas<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> y <span class="token operator">*</span> translationScale<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">if (imageWidth * viewHeight &lt; viewWidth * imageHeight){ //... }</code>, this check means that we can only moves the image/canvas vertically (parallax) when the aspect ratio of image is look like more portrait than aspect ratio of the view. why?</p>
<p>For example we have image 8x8 and view 6x5, and it turns out when we scale the image down to fit the size of view, there is an invisible area of image left, that means we can translate this area up &#x26; down</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d5c46a1d55a65e2eab625f25b20f010b/7131f/vis1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAycAAAMnAGTj5aaAAABp0lEQVQoz22SQUhUURSGv3vfzOibBkd9MyM6Si2ECgYSXCiGELTRVRFEQotqV5tWQdDSTatAstoloihUroNm4S6ibSKCG8fRguYpiTM2b3q9e+I+jSI68J9zFvf8/Oc/F6AT0JUKiFgksRHnx2twb5F/QynoKdiuyH6rWx/+yDgHrQ7nazOvqNe5trXFrTDkuggTIo5jZ1KQ4Y3Aw/J/CfMFHffVowGqjf4Y242BWNV3EcTCGHZFSFul7tDFPsZvd/F0J3XC0wa4QFop0oUenbGb7QXesN/0pvzAu+EH3mmiiH1j+GlMTLgpQhvPJOuWpZeZ7TxzzUE+SgIogLoAnEOpUq6TIZDE+mFpaS/okmqjXz74I3etwugvhX5M+Fy6x5ZfJZjdhZlKjiuPOqwadOIU0A66/eZlsiD6S9C3YmfDyJFP30r3CUPmo4jXxrASGTUrm6R4ItnkQr3IfCvHkpzhRS3Jy0bsj+u63AFq73CsNe9rYw92jorljYOzq28/T0zy2xfrtX0AeEqRY3Qqy/lLvQyOejhJUMdH0Pq4Tl+1WU5+xh/8AmHfun9d1tu8AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="vis1"
        title="vis1"
        src="/static/d5c46a1d55a65e2eab625f25b20f010b/f058b/vis1.png"
        srcset="/static/d5c46a1d55a65e2eab625f25b20f010b/c26ae/vis1.png 158w,
/static/d5c46a1d55a65e2eab625f25b20f010b/6bdcf/vis1.png 315w,
/static/d5c46a1d55a65e2eab625f25b20f010b/f058b/vis1.png 630w,
/static/d5c46a1d55a65e2eab625f25b20f010b/7131f/vis1.png 710w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>But when the aspect ratio of view is more portrait (tall) we don’t have any invisible area, instead there is blank area inside a view (which is not what we want)</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/aeb20e7b88d68d6c0782c71877eae1d5/7131f/vis2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAycAAAMnAGTj5aaAAABlUlEQVQoz22RvUtbURjGfycmXo0kaqISUr+jzVAUpyrFoRSKS8WlCFKcaocOroJ/gU7SklQQSutHLCgucamKHToI3bTQRQyk1KpF8EJBopCb88q5iYLogedw4H358TznAagByrJZEIGZKajx4gH8JI5gcpv7TnNDcb8kVRLYNoOZDCP5PEMiPBMxsNfK87A3Sv9oLckTn0uoDN4ChgK3gDcy17kIYqQ1hyJUkJSgf1sivPtdz+fLGN/E6yZRqtWYQ6m2yjLa4WXgU3ZsYPes+83m8fPx6V8TPRQK2FpT0NoFHohgkZBQy/wPi/d/4MO/BsY+VgFBUDGgEaVa2iJ0gHj/XjanjJkLx5I9u/utceiU3BmdusCkhDrSGYuUwEK+jkXHYlXcqPF4HEPdX6LcRDzMNa5dA3/aXeM4Dl+0Ji3CutZqTgQfCakuX76IslQIsyKtpMTHhkDvsAsNPx26LoKd077J41zk+/7/zp2vRwMvzLwCCABeKZoI4/HU8eRVNbHHTTx4FAVVbMJvvrH0ZhbZulvKFUuaxpDuNyl0AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="vis2"
        title="vis2"
        src="/static/aeb20e7b88d68d6c0782c71877eae1d5/f058b/vis2.png"
        srcset="/static/aeb20e7b88d68d6c0782c71877eae1d5/c26ae/vis2.png 158w,
/static/aeb20e7b88d68d6c0782c71877eae1d5/6bdcf/vis2.png 315w,
/static/aeb20e7b88d68d6c0782c71877eae1d5/f058b/vis2.png 630w,
/static/aeb20e7b88d68d6c0782c71877eae1d5/7131f/vis2.png 710w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2>Writing Horizontal Parallax Effect</h2>
<p>Horizontal parallax effect is the same as vertical just reverse the logic from vertical to horizontal</p>
<div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> HorizontalParallaxTransformer <span class="token operator">:</span> <span class="token function">ViewTransformer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttached</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        view<span class="token punctuation">.</span>scaleType <span class="token operator">=</span> ImageView<span class="token punctuation">.</span>ScaleType<span class="token punctuation">.</span>CENTER_CROP
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">apply</span><span class="token punctuation">(</span>view<span class="token operator">:</span> ScrollTransformImageView<span class="token punctuation">,</span> canvas<span class="token operator">:</span> Canvas<span class="token punctuation">,</span> viewX <span class="token operator">:</span> Int<span class="token punctuation">,</span> viewY <span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span>scaleType <span class="token operator">==</span> ImageView<span class="token punctuation">.</span>ScaleType<span class="token punctuation">.</span>CENTER_CROP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">val</span> imageWidth <span class="token operator">=</span> view<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>intrinsicWidth
            <span class="token keyword">val</span> imageHeight <span class="token operator">=</span> view<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>intrinsicHeight

            <span class="token keyword">val</span> viewWidth <span class="token operator">=</span> view<span class="token punctuation">.</span>width <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingLeft <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingRight
            <span class="token keyword">val</span> viewHeight <span class="token operator">=</span> view<span class="token punctuation">.</span>height <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingTop <span class="token operator">-</span> view<span class="token punctuation">.</span>paddingBottom

            <span class="token keyword">val</span> deviceWidth <span class="token operator">=</span> view<span class="token punctuation">.</span>resources<span class="token punctuation">.</span>displayMetrics<span class="token punctuation">.</span>widthPixels

            <span class="token keyword">if</span> <span class="token punctuation">(</span>viewX <span class="token operator">&lt;</span> <span class="token operator">-</span>viewWidth <span class="token operator">||</span> viewX <span class="token operator">></span> deviceWidth<span class="token punctuation">)</span> <span class="token keyword">return</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>imageWidth <span class="token operator">*</span> viewHeight <span class="token operator">></span> viewWidth <span class="token operator">*</span> imageHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">val</span> scale <span class="token operator">=</span> viewHeight<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> imageHeight<span class="token punctuation">.</span><span class="token function">toFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> invisibleHorizontalArea <span class="token operator">=</span> imageWidth <span class="token operator">*</span> scale <span class="token operator">-</span> viewWidth

                <span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token function">centeredX</span><span class="token punctuation">(</span>viewX<span class="token punctuation">,</span> viewWidth<span class="token punctuation">,</span> deviceWidth<span class="token punctuation">)</span>
                <span class="token keyword">val</span> translationScale <span class="token operator">=</span> invisibleHorizontalArea <span class="token operator">/</span> <span class="token punctuation">(</span>deviceWidth <span class="token operator">+</span> viewWidth<span class="token punctuation">)</span>
                canvas<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>x <span class="token operator">*</span> translationScale<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div></section><hr/><footer><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/6dacf7b2c4db85249eda1745ffb570ed/d4bf4/profile-pic.avif 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/6dacf7b2c4db85249eda1745ffb570ed/3faea/profile-pic.webp 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/6dacf7b2c4db85249eda1745ffb570ed/e5610/profile-pic.png" data-srcset="/static/6dacf7b2c4db85249eda1745ffb570ed/e5610/profile-pic.png 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/6dacf7b2c4db85249eda1745ffb570ed/d4bf4/profile-pic.avif 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/6dacf7b2c4db85249eda1745ffb570ed/3faea/profile-pic.webp 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/6dacf7b2c4db85249eda1745ffb570ed/e5610/profile-pic.png" srcSet="/static/6dacf7b2c4db85249eda1745ffb570ed/e5610/profile-pic.png 50w,/static/6dacf7b2c4db85249eda1745ffb570ed/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><p>Written by <strong>Aris</strong> <!-- -->Software Engineer<!-- --> <a href="https://twitter.com/">You should follow them on Twitter</a></p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li><a rel="next" href="/2018-06-21-scroll_position_android/">Save and Restore ScrollView and RecyclerView Scroll Position in Android<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2021<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018-06-06-scroll_parallax_image_view/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e6b5355c9ecf751d8025.js"],"app":["/app-fb1d871f987470a48e9e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-bb1698d01a7f9dde5caa.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a1bc4ffbb0ebaf245cf7.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-20f655bfb94bd369e9d3.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-189cdafe32c9da859313.js"]};/*]]>*/</script><script src="/polyfill-e6b5355c9ecf751d8025.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-189cdafe32c9da859313.js" async=""></script><script src="/commons-ab2410dfbec4227df496.js" async=""></script><script src="/app-fb1d871f987470a48e9e.js" async=""></script><script src="/framework-30c79b2d3b5411886184.js" async=""></script><script src="/webpack-runtime-703914a881fe283588fc.js" async=""></script></body></html>